<?php
/**
 * @file
 * Code for the GIE Map feature.
 */

include_once 'gie_map.features.inc';

/**
 * Helper function to add proper JS files
 */
function _gie_map_viz_init() {
  $path = drupal_get_path('module', 'gie_data_viz');
  //add dependencies
  drupal_add_js($path . '/app/dependencies/elasticsearch.min.js');
  drupal_add_js($path . '/app/dependencies/elasticsearch.angular.min.js');
  //add angular app
  angularjs_init_application('gieDataViz');
  //pass index and site information to javascript for AngularJS app to use
  drupal_add_js(array('gie_data_viz' =>
    array(
      'base' => 'elasticsearch_index_'. _gie_data_viz_get_database_name() . '_',
      'url' => _gie_data_viz_get_elastic_url(),
    ),
  ), array('type' => 'setting'));
}
